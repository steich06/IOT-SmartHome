# Task 3 – MQTT Broker / Azure IoT Hub Infrastructure

For this project we use **Azure IoT Hub** as the MQTT-based broker for the Smart Plant Care System (SPCS).

---

## 1. Chosen Option

According to the assignment, the MQTT broker infrastructure can be:

- VM based  
- Docker based  
- Azure IoT Hub  

In this project we chose: **Azure IoT Hub**, because it is a managed PaaS service and it matches the reference exercise from the course repository (`6-paas-iot-hub`).

---

## 2. IoT Hub Setup

- **Subscription:** Azure for Students  
- **Resource Group:** `rg-smart-plant-iot`  
- **IoT Hub Name:** `spcs-iot-hub-yunus-doruk`  
- **Region:** Switzerland North  
- **Tier:** Free (F1)  

The IoT Hub acts as the central MQTT endpoint for our IoT Device Simulator.

---

## 3. Device Identity (IoT Device Simulator)

We created one device identity for the simulator:

- **Device ID:** `spcs-simulator-1`  
- **Authentication:** Symmetric key (auto-generated by Azure)  
- **Status:** Enabled  

The device **primary connection string** is **NOT** committed to GitHub for security reasons.  
It is used in Task 4 to connect to Azure IoT Hub using MQTT over TLS (port 8883).

**Example (redacted):**



---

## 4. MQTT / Communication Overview

### The IoT Device Simulator (Task 4) will:
- connect to the IoT Hub with the device connection string,  
- send telemetry (soil moisture, light, temperature, etc.),  
- receive watering commands from the cloud (Cloud-to-Device messages).  

### The Backend API (Task 6) will:
- read telemetry data from cloud storage,  
- send watering commands (C2D messages) to the device via IoT Hub.

This defines the communication flow:

**Device → IoT Hub → Storage → Backend API → IoT Hub → Device**

---

## 5. Reference

This setup is based on the reference exercise from the course repository:  
`https://github.com/lsawicki-cdv/course-iot-cloud-computing/tree/main/6-paas-iot-hub`

---
